library('private-pipeline-library')
library('jenkins-shared')

def settings =[
    useMvnw: true,
    deployBranch: 'main',
    javaVersion : 'OpenJDK 17',
    runTests: true,
    additionalReleaseProfiles: ['publish-central'], // public publishing to central
    iqPolicyEvaluation: { stage ->
      nexusPolicyEvaluation iqStage: 'release', iqApplication: 'nxrm3-maven-plugin',
        iqScanPatterns: [[scanPattern: '**/target/*.jar']],
        iqModuleExcludes: [[moduleExclude: 'testsuite/**']]
    },
    onSuccess: { build, env ->
      notifyChat(env: env, currentBuild: build, room: 'nxrm-notifications')
    },
    onFailure: { build, env ->
      notifyChat(env: env, currentBuild: build,
       room: 'nxrm-notifications')
    }
]

mavenReleasePipeline(settings)
